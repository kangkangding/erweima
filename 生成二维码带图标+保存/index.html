<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>
		
		<script type='text/javascript' src='http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js'></script> 
		<script type="text/javascript" src="js/jquery.qrcode.js" ></script>
        <script type="text/javascript" src="js/qrcode.js" ></script> 
        <script type="text/javascript" src="js/utf.js" ></script>
		<p>table二维码</p>
		 <div id="qrcodeTable"></div>
		 <p>canvas二维码</p>
		 <div id="qrcodesvae"></div>
		 <a id="download"></a><br>
		 <input type="text" id="getval"/> <button id="change">生成新二维码</button><br><br><br>
		 <button id="save">保存二维码</button> 
		 <p>canvas带logo二维码</p>
		 <div id="qrcodeCanvas"></div>
		 <script> 
			jQuery('#qrcodeTable').qrcode({
		         render    : "table",                <!--二维码生成方式 -->
		         text    : "http://www.baidu.com" , <!-- 二维码内容  -->
		         width : "200",               //二维码的宽度
                 height : "200",
		     });
		    jQuery('#qrcodesvae').qrcode({
		         render    : "canvas",                <!--二维码生成方式 -->
		         text    : "http://www.baidu.com" , <!-- 二维码内容  -->
		         width : "200",               //二维码的宽度
                 height : "200",
		     });    
		     jQuery('#qrcodeCanvas').qrcode({
		     	 render    : "canvas",
		         text    : "http://www.baidu.com",
		         width : "200",               //二维码的宽度
                 height : "200",              //二维码的高度
                 background : "#ffffff",       //二维码的后景色
                 foreground : "#000000",        //二维码的前景色
                 src: 'img/true.jpg'             //二维码中间的图片
		     });  



			 document.getElementById("change").onclick =function(){
				//var str =document.getElementById("getval").value;
				
				jQuery('#qrcodesvae').qrcode({
		         render    : "canvas",                <!--二维码生成方式 -->
		         text    : document.getElementById("getval").value , <!-- 二维码内容  -->
		         width : "200",               //二维码的宽度
                 height : "200",
		     }); 
			};
			$("#save").click(function(){ 
				var canvas = $('#qrcodesvae').find("canvas").get(0); 
				var url="";
				try{
					url = canvas.toDataURL('image/jpeg'); 
				}catch(e){
					alert(e);
				}
				$("#download").attr('download', "1111");//文件命名
				$("#download").attr('href', url).get(0).click(); 
		
				return false; 
			});
		 </script>
		 </body>
</html>
